{% schema %}
{
  "name": "Luma Footer (Native)",
  "tag": "footer",
  "class": "section-footer",
  "settings": [
    {
      "type": "header",
      "content": "Color Scheme"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#1A1A1A"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#9ca3af"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading/Accent Color",
      "default": "#C5A065"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top Padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "brand_information",
      "name": "Brand Information",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo Image"
        },
        {
          "type": "range",
          "id": "logo_width",
          "min": 50,
          "max": 300,
          "step": 5,
          "default": 150,
          "unit": "px",
          "label": "Logo Width"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "LUMA LABS"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Description",
          "default": "Redefining skincare with science and luxury."
        }
      ]
    },
    {
      "type": "link_list",
      "name": "Menu",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Quick Links"
        },
        {
          "type": "link_list",
          "id": "menu",
          "default": "footer",
          "label": "Menu"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Newsletter"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Description",
          "default": "Subscribe for updates."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Luma Footer (Native)",
      "blocks": [
        { "type": "brand_information" },
        { "type": "link_list", "settings": { "heading": "Shop" } },
        { "type": "link_list", "settings": { "heading": "Support" } },
        { "type": "newsletter" }
      ]
    }
  ]
}
{% endschema %}

{%- style -%}
  #shopify-section-{{ section.id }} .footer-native {
    background-color: {{ section.settings.bg_color }};
    color: {{ section.settings.text_color }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }

  #shopify-section-{{ section.id }} .footer-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 40px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  @media (min-width: 768px) {
    #shopify-section-{{ section.id }} .footer-grid {
      grid-template-columns: repeat({{ section.blocks.size }}, 1fr);
    }
  }

  /* Typography */
  #shopify-section-{{ section.id }} h2.footer-block__heading {
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: {{ section.settings.heading_color }};
    margin-bottom: 20px;
    margin-top: 0;
  }

  #shopify-section-{{ section.id }} p {
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 20px;
  }

  #shopify-section-{{ section.id }} a {
    color: {{ section.settings.text_color }};
    text-decoration: none;
    transition: color 0.2s ease;
  }

  #shopify-section-{{ section.id }} a:hover {
    color: white;
  }

  /* List Styling */
  #shopify-section-{{ section.id }} ul.footer-block__details-content {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  #shopify-section-{{ section.id }} li {
    margin-bottom: 10px;
    font-size: 13px;
  }

  /* Newsletter Form */
  #shopify-section-{{ section.id }} .field {
    display: flex;
    gap: 10px;
  }

  #shopify-section-{{ section.id }} .field__input {
    flex-grow: 1;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: white;
    padding: 10px;
    font-size: 13px;
  }

  #shopify-section-{{ section.id }} .field__button {
    background: {{ section.settings.heading_color }};
    color: white;
    border: none;
    padding: 10px 20px;
    text-transform: uppercase;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
    cursor: pointer;
  }
{%- endstyle -%}

<div class="footer-native">
  <div class="footer-grid">
    {%- for block in section.blocks -%}
      <div class="footer-block grid__item" {{ block.shopify_attributes }}>
        
        {%- case block.type -%}
          
          {%- when 'brand_information' -%}
            
            <div class="footer-block__brand-info">
              {%- if block.settings.logo != blank -%}
                {%- assign logo_width = block.settings.logo_width -%}
                <div class="footer-block__logo-wrapper" style="width: {{ logo_width }}px; max-width: 100%;">
                    {{ block.settings.logo | image_url: width: 600 | image_tag: 
                       width: logo_width, 
                       class: 'footer-block__logo-image', 
                       loading: 'lazy', 
                       style: 'width: 100%; height: auto;' 
                    }}
                </div>
              {%- else -%}
                <h2 class="footer-block__heading" style="color: {{ section.settings.heading_color }}; font-size: 20px;">{{ block.settings.title }}</h2>
              {%- endif -%}
              
              {%- if block.settings.text != blank -%}
                <div class="rte" style="margin-top: 20px;">
                  {{ block.settings.text }}
                </div>
              {%- endif -%}
            </div>

          {%- when 'link_list' -%}
            {%- if block.settings.heading != blank -%}
              <h2 class="footer-block__heading">{{ block.settings.heading }}</h2>
            {%- endif -%}
            {%- if block.settings.menu != blank -%}
              <ul class="footer-block__details-content list-unstyled">
                {%- for link in block.settings.menu.links -%}
                  <li>
                    <a href="{{ link.url }}" class="link link--text list-menu__item list-menu__item--link">
                      {{ link.title }}
                    </a>
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}

          {%- when 'newsletter' -%}
            {%- if block.settings.heading != blank -%}
              <h2 class="footer-block__heading">{{ block.settings.heading }}</h2>
            {%- endif -%}
            {%- if block.settings.text != blank -%}
              <div class="footer-block__newsletter-text rte">{{ block.settings.text }}</div>
            {%- endif -%}
            
            {%- form 'customer', id: 'ContactFooter', class: 'footer__newsletter newsletter-form' -%}
              <input type="hidden" name="contact[tags]" value="newsletter">
              <div class="newsletter-form__field-wrapper">
                <div class="field">
                  <input
                    id="NewsletterForm--{{ section.id }}"
                    type="email"
                    name="contact[email]"
                    class="field__input"
                    value="{{ form.email }}"
                    aria-required="true"
                    autocorrect="off"
                    autocapitalize="off"
                    autocomplete="email"
                    {% if form.errors %}
                      autofocus
                      aria-invalid="true"
                      aria-describedby="ContactFooter-error"
                    {% elsif form.posted_successfully? %}
                      aria-describedby="ContactFooter-success"
                    {% endif %}
                    placeholder="Email Address"
                    required
                  >
                  <button type="submit" class="field__button" name="commit" id="Subscribe" aria-label="Subscribe">
                    JOIN
                  </button>
                </div>
                {%- if form.errors -%}
                  <small class="newsletter-form__message form__message" id="ContactFooter-error" style="color:red; display:block; margin-top:5px;">
                    ⚠ {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
                  </small>
                {%- endif -%}
                {%- if form.posted_successfully? -%}
                  <h3 class="newsletter-form__message newsletter-form__message--success form__message" id="ContactFooter-success" style="color:#C5A065; display:block; margin-top:5px; font-size:12px;" tabindex="-1" autofocus>
                    ✓ Success!
                  </h3>
                {%- endif -%}
              </div>
            {%- endform -%}

        {%- endcase -%}
      </div>
    {%- endfor -%}
  </div>
</div>
