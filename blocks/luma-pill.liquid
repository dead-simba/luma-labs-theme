{%- doc -%}
  Identifiably Luma Pill Block.
  Provides a versatile badge/pill that can be solid, outlined, or text-only.
  Supports Phosphor icons and granular typography/color control.
{%- enddoc -%}

{%- liquid
  assign block_settings = block.settings
  assign text_style = ''
  if block_settings.bold
    assign text_style = text_style | append: 'font-weight: 700;'
  endif
  if block_settings.uppercase
    assign text_style = text_style | append: 'text-transform: uppercase; letter-spacing: 0.05em;'
  endif

  assign icon_class = block_settings.icon
  if block_settings.icon_preset != 'custom'
    assign icon_class = block_settings.icon_preset
  endif
-%}

<div class="luma-pill-wrapper luma-pill--{{ block.id }}" {{ block.shopify_attributes }}>
  <div class="luma-pill luma-pill--style-{{ block_settings.style }}">
    {%- if icon_class != blank -%}
      <i class="ph {{ icon_class }} luma-pill__icon"></i>
    {%- endif -%}
    <span class="luma-pill__text" style="{{ text_style }}">
      {{ block_settings.text }}
    </span>
  </div>
</div>

<style>
  .luma-pill--{{ block.id }} {
    --pill-bg: {{ block_settings.bg_color }};
    --pill-border: {{ block_settings.border_color }};
    --pill-text: {{ block_settings.text_color }};
    --pill-font-size: {{ block_settings.font_size }}px;
    --pill-mobile-font-size: {{ block_settings.font_size_mobile }}px;
    --pill-padding-y: {{ block_settings.padding_y }}px;
    --pill-padding-x: {{ block_settings.padding_x }}px;

    display: flex;
    justify-content: {{ block_settings.alignment }};
    width: 100%;
    margin: 0;
  }

  .luma-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: var(--pill-padding-y) var(--pill-padding-x);
    border-radius: 9999px;
    font-size: var(--pill-font-size);
    color: var(--pill-text);
    transition: all 0.3s ease;
    line-height: 1;
  }

  .luma-pill--style-solid {
    background-color: var(--pill-bg);
    border: 1px solid var(--pill-bg);
  }

  .luma-pill--style-outline {
    background-color: transparent;
    border: 1px solid var(--pill-border);
  }

  .luma-pill--style-none {
    background-color: transparent;
    border: 1px solid transparent;
    padding-left: 0;
    padding-right: 0;
  }

  .luma-pill__icon {
    font-size: 1.25em;
  }

  @media screen and (max-width: 768px) {
    .luma-pill--{{ block.id }} {
      --pill-font-size: var(--pill-mobile-font-size);
      justify-content: {{ block_settings.alignment_mobile }};
    }
  }
</style>

{% schema %}
{
  "name": "Luma Pill",
  "tag": null,
  "settings": [
    {
      "type": "text",
      "id": "text",
      "label": "Pill Text",
      "default": "Science-Backed"
    },
    {
      "type": "select",
      "id": "icon_preset",
      "label": "Icon Selection",
      "options": [
        { "value": "", "label": "No Icon" },
        { "value": "ph-sparkle", "label": "Sparkle" },
        { "value": "ph-flask", "label": "Flask / Science" },
        { "value": "ph-star", "label": "Star" },
        { "value": "ph-check-circle", "label": "Check Circle" },
        { "value": "ph-leaf", "label": "Leaf / Natural" },
        { "value": "ph-shield-check", "label": "Shield / Safe" },
        { "value": "custom", "label": "Custom Phosphor Class" }
      ],
      "default": "ph-sparkle"
    },
    {
      "type": "text",
      "id": "icon",
      "label": "Custom Phosphor Class",
      "info": "Only used if 'Custom' is selected above. Example: ph-heart",
      "visible_if": "{{ block.settings.icon_preset == 'custom' }}"
    },
    {
      "type": "select",
      "id": "style",
      "label": "Visual Style",
      "options": [
        { "value": "solid", "label": "Solid Background" },
        { "value": "outline", "label": "Outline" },
        { "value": "none", "label": "Text Only (No Color)" }
      ],
      "default": "solid"
    },
    {
      "type": "header",
      "content": "Alignment"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Desktop Alignment",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "alignment_mobile",
      "label": "Mobile Alignment",
      "options": [
        { "value": "flex-start", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#E0EDF8"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#2C2C2C"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#2C2C2C"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "font_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Desktop Font Size",
      "default": 12
    },
    {
      "type": "range",
      "id": "font_size_mobile",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Mobile Font Size",
      "default": 11
    },
    {
      "type": "checkbox",
      "id": "bold",
      "label": "Bold Text",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "uppercase",
      "label": "Uppercase",
      "default": true
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_y",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Vertical Padding",
      "default": 8
    },
    {
      "type": "range",
      "id": "padding_x",
      "min": 0,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Horizontal Padding",
      "default": 16
    }
  ],
  "presets": [
    {
      "name": "Luma Pill"
    }
  ]
}
{% endschema %}
